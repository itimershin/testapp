pipeline {
    agent any

    stages {
        stage('Build docker image. Run tests and build app.') {
            steps {
                git 'https://github.com/itimershin/testapp'
                sh 'sudo docker build . -t reactnginx'
            }
        }
	stage('hello from tests'){
	    steps {
	}
	}
	stage('Run stage'){
	steps {
		sh 'sudo docker run --it --rm -p 80:80 reactnginx:latest'
	    }
	}
    }
}
